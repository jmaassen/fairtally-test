# This workflow will run fairtally on the RSD data once an hour and push the results to the repo
#
# TODO:
#    - push result to repo
#    - generate an overview from the report and automatically create an issue out of that?
#    - set frequency to daily or weekly and move to TL repo?

name: Fairtally

on: [push]  

jobs:
  fairtally:

    runs-on: ubuntu-latest

    env: 
       APIKEY_GITHUB: ${{ secrets.apikey }}

    steps:
      - uses: actions/setup-python@v2
        with: 
          python-version: 3.8
      - name: Install some deps
          run: sudo apt-get -y install jq
      - name: Install fairfairtally 
          run: pip3 install --user howfairis fairtally
      - name: Run fairtally 
          run: fairtally -o report.html https://github.com/xenon-middleware/xenon
